<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dosha Oscillation Engine</title>

<!-- CSS -->
<style>
body { margin:0; padding:0; background:#0b0b0b; font-family:Poppins,sans-serif; color:#fff; }
.navbar { width:100%; background:rgba(15,15,15,0.85); backdrop-filter:blur(10px); padding:14px 25px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,215,0,0.25);}
.logo { font-size:20px; font-weight:600; color:gold; letter-spacing:0.5px; }
.nav-links { list-style:none; display:flex; gap:25px; }
.nav-links a { text-decoration:none; color:#e6e6e6; font-size:16px; padding:8px 14px; border-radius:8px; transition:0.3s ease; }
.nav-links a:hover { color:#000; background:gold; box-shadow:0 0 8px gold; }
.hero-section { text-align:center; margin-top:80px; animation:fadeInUp 1.2s ease; }
.hero-logo { width:110px; height:110px; border-radius:50%; margin-bottom:20px; filter:drop-shadow(0 0 10px rgba(255,215,0,0.4)); animation:breathe 4s infinite ease-in-out; }
.hero-title { font-size:32px; font-weight:700; color:white; letter-spacing:1px; }
.hero-tagline { font-size:17px; font-weight:300; color:white; margin-top:8px; }
@keyframes fadeInUp {0% { opacity:0; transform:translateY(30px);} 100% { opacity:1; transform:translateY(0);} }
@keyframes breathe {0%,100% { transform: scale(1);} 50% { transform: scale(1.06);} }
.dosha-container { display:flex; flex-direction:column; align-items:center; margin-top:60px; position:relative; }
canvas { border-radius:50%; background: radial-gradient(circle, #0f0f0f, #000); box-shadow: 0 0 25px rgba(255,215,0,0.3),0 0 50px rgba(255,215,0,0.15); position:relative; z-index:2; }
.dosha-values { margin-top:25px; text-align:center; font-size:20px; color:green; letter-spacing:1px; }
.aura-glow,.glow-ring { position:absolute; width:360px; height:360px; border-radius:50%; background: radial-gradient(circle, rgba(255,215,0,0.35), rgba(0,0,0,0) 70%); filter:blur(35px); pointer-events:none; z-index:0; }
.pulse-glow { animation:pulseGlow 4s ease-in-out infinite; transition:all 0.3s ease-in-out; }
@keyframes pulseGlow {0% {transform: scale(1); filter:blur(25px) brightness(1); opacity:0.85;} 50% {transform: scale(1.03); filter:blur(30px) brightness(1.18); opacity:1;} 100% {transform: scale(1); filter:blur(25px) brightness(1); opacity:0.85;}}
.wave-ring {position:absolute; width:260px; height:260px; border-radius:50%; border:2px solid rgba(255,215,0,0.28); left:50%; top:50%; transform:translate(-50%,-50%); animation:waveRing 4s ease-out infinite; pointer-events:none;}
.wave-ring:nth-child(2){ animation-delay:1.2s;}
.wave-ring:nth-child(3){ animation-delay:2.4s;}
@keyframes waveRing{0% {transform:translate(-50%,-50%) scale(0.75); opacity:0.5;} 70% {opacity:0.15;} 100% {transform:translate(-50%,-50%) scale(2.2); opacity:0;}}
.factor-panel {width:90%; max-width:600px; margin:60px auto; background:rgba(20,20,20,0.35); padding:25px; border-radius:20px; color:white; border:1px solid rgba(255,215,0,0.3); backdrop-filter:blur(8px);}
.factor-panel h2 {text-align:center; margin-bottom:20px;}
.factor-panel label { display:block; margin-top:18px; margin-bottom:5px; font-size:16px;}
.factor-panel input[type="range"] { width:100%; }
.range-value { float:right; color:#fff; font-weight:600; }
</style>

<!-- JS Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffd700">
    
</head>
<body>
<!-- ðŸ” LOCK SCREEN -->
<div id="lockScreen" style="
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:#0b0b0b;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:9999;
    color:white;
    text-align:center;
    font-family:Poppins,sans-serif;
">
    <h2 style="color:gold;">Enter Access Code</h2>

    <input id="accessCodeInput"
           placeholder="Enter code"
           style="padding:10px 15px; border-radius:8px; border:1px solid gold;
                  background:black; color:white; margin-top:10px; width:200px; text-align:center;">

    <button onclick="unlockApp()"
            style="margin-top:15px; padding:10px 20px; background:gold; color:black;
                   border:none; border-radius:8px; cursor:pointer;">
        Unlock
    </button>

    <!-- Generate Access Code Button -->
    <a href="https://wa.me/91XXXXXXXXXX?text=I%20want%20access%20code"
       style="margin-top:15px; padding:10px 20px; background:#007bff; color:white;
              border-radius:8px; text-decoration:none;">
        Get Access Code (WhatsApp)
    </a>
  </div>
  <div id="engineScreen" style="display:none;">
  
<!-- Navbar -->
<nav class="navbar">
    <div class="logo">Dosha Oscillation Engine</div>
    <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#oscillation">Oscillation</a></li>
        <li><a href="#prakriti">Prakriti</a></li>
        <li><a href="#settings">Settings</a></li>
    </ul>
</nav>

<!-- Hero -->
<header class="hero-section">
    <img src="logo.png" alt="Logo" class="hero-logo"/>
    <h1 class="hero-title">Dosha Oscillation Engine</h1>
    <p class="hero-tagline">Luxury Healing Through Ayurvedic Intelligence...</p>
</header>

<!-- Dosha container -->
<div class="dosha-container">
    <div class="glow-ring pulse-glow"></div>
    <div class="wave-ring"></div>
    <div class="wave-ring"></div>
    <div class="wave-ring"></div>
    <div class="aura-glow pulse-glow"></div>
    <canvas id="doshaCanvas" width="380" height="380"></canvas>

    <div class="dosha-values">
        <p>Vata: <span id="vataVal">40</span>%</p>
        <p>Pitta: <span id="pittaVal">35</span>%</p>
        <p>Kapha: <span id="kaphaVal">25</span>%</p>
    </div>
</div>

<!-- Factor panel -->
<div class="factor-panel">
<h2>Dosha Factor Inputs</h2>

<label>Sleep (hours) <span class="range-value" id="sleepVal">8</span></label>
<input type="range" min="0" max="12" value="8" id="sleep">

<label>Hydration (liters/day) <span class="range-value" id="hydrationVal">2</span></label>
<input type="range" min="0" max="4" step="0.1" value="2" id="hydration">

<label>Stress (PSS 0â€“40) <span class="range-value" id="stressVal">10</span></label>
<input type="range" min="0" max="40" value="10" id="stress">

<label>Agni (1â€“10) <span class="range-value" id="agniVal">7</span></label>
<input type="range" min="1" max="10" value="7" id="agni">

<label>Temperature (Â°C) <span class="range-value" id="tempVal">36.5</span></label>
<input type="range" min="35" max="40" step="0.1" value="36.5" id="temp">

<label>Food heaviness (0â€“100) <span class="range-value" id="foodVal">50</span></label>
<input type="range" min="0" max="100" value="50" id="food">

<label>Routine (hours/day regular) <span class="range-value" id="routineVal">8</span></label>
<input type="range" min="0" max="24" value="8" id="routine">

<label>Ama (toxins 0â€“100) <span class="range-value" id="amaVal">10</span></label>
<input type="range" min="0" max="100" value="10" id="ama">

<label>Activity (minutes/day) <span class="range-value" id="activityVal">60</span></label>
<input type="range" min="0" max="120" value="60" id="activity">

<label>Season (1â€“4) <span class="range-value" id="seasonVal">1</span></label>
<input type="range" min="1" max="4" value="1" id="season">
</div>

<!-- Export buttons -->
<div style="margin-top:20px; text-align:center;">
<button id="downloadPDF" style="padding:8px 18px; border-radius:6px; background:#ffd700; color:#000; border:none;">ðŸ“„ Download PDF Report</button>
<button id="downloadJSON" style="padding:8px 18px; border-radius:6px; background:#ffaa00; color:#000; border:none; margin-left:10px;">ðŸ§¾ Export JSON</button>
<button id="downloadPNG" style="padding:8px 18px; border-radius:6px; background:#55ffcc; color:#000; border:none; margin-left:10px;">ðŸ“¸ Save Screenshot</button>
</div>

<!-- Sound toggle -->
<div id="soundToggle" style="cursor:pointer; margin-top:10px; color:#ffd700; font-size:14px; opacity:0.7; text-align:center;">ðŸ”ˆ Sound: OFF</div>

<!-- JS -->
<script>
let canvas = document.getElementById("doshaCanvas");
let ctx = canvas.getContext("2d");
let vata=40, pitta=35, kapha=25, t=0;
const factorIds = ["sleep","hydration","stress","agni","temp","food","routine","ama","activity","season"];
function getFactor(id){ return parseFloat(document.getElementById(id).value); }

// Update slider display
factorIds.forEach(id=>{
  const elem=document.getElementById(id);
  const valElem=document.getElementById(id+"Val");
  elem.oninput=function(){ valElem.innerText=elem.value; }
});

// Map real factors to % influence
function computeDoshas(){
  let sleep=getFactor("sleep"), hydration=getFactor("hydration"), stress=getFactor("stress"),
      agni=getFactor("agni"), temp=getFactor("temp"), food=getFactor("food"),
      routine=getFactor("routine"), ama=getFactor("ama"), activity=getFactor("activity"),
      season=getFactor("season");

  // Simple proportional influence
  vata = Math.max(0, Math.min(100, 100*( (sleep/8 + activity/60 + (10-stress)/10)/3 )));
  pitta = Math.max(0, Math.min(100, 100*( (agni/8 + (37-temp)/1.5 + (50-food)/50)/3 )));
  kapha = Math.max(0, Math.min(100, 100*( (hydration/3 + (24-routine)/24 + (100-ama)/100)/3 )));
  let total=vata+pitta+kapha;
  vata=(vata/total)*100; pitta=(pitta/total)*100; kapha=(kapha/total)*100;
}

// Draw dosha rings
function drawRings(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const cX=canvas.width/2, cY=canvas.height/2, base=80; ctx.lineWidth=6;
  ctx.beginPath(); ctx.arc(cX,cY,base+vata,0,Math.PI*2); ctx.strokeStyle="rgba(173,216,230,0.8)"; ctx.stroke();
  ctx.beginPath(); ctx.arc(cX,cY,base+pitta,0,Math.PI*2); ctx.strokeStyle="rgba(255,140,0,0.8)"; ctx.stroke();
  ctx.beginPath(); ctx.arc(cX,cY,base+kapha,0,Math.PI*2); ctx.strokeStyle="rgba(144,238,144,0.8)"; ctx.stroke();
  document.getElementById("vataVal").innerText=Math.round(vata);
  document.getElementById("pittaVal").innerText=Math.round(pitta);
  document.getElementById("kaphaVal").innerText=Math.round(kapha);
}

// Animate
function animateDosha(){ t+=0.02; computeDoshas(); drawRings(); requestAnimationFrame(animateDosha); }
animateDosha();

// Ayurvedic Insight
function analyzeDoshaState(v,p,k){
  const highest=Math.max(v,p,k); let type="";
  if(highest===v) type="Vata-dominant state";
  if(highest===p) type="Pitta-dominant state";
  if(highest===k) type="Kapha-dominant state";
  let spread=Math.abs(v-p)+Math.abs(p-k)+Math.abs(k-v);
  let intensity=spread<30?"Balanced":(spread<60?"Moderate Oscillation":"High Instability (Chaotic)");
  return {type,intensity};
}
function factorInterpretation(){ const f=id=>getFactor(id); let notes=[];
  if(f("stress")>30) notes.push("High stress is increasing Vata instability.");
  if(f("sleep")<5) notes.push("Poor sleep aggravates Vata.");
  if(f("hydration")<1.5) notes.push("Low hydration destabilizes Kapha-Pitta.");
  if(f("ama")>40) notes.push("High Ama blocks Kapha and Agni.");
  if(f("agni")<5) notes.push("Weak Agni slows digestion.");
  if(f("temp")>38) notes.push("High temperature increases Pitta.");
  if(f("food")>70) notes.push("Heavy food increases Kapha.");
  if(f("activity")<30) notes.push("Low activity reduces Vata flow.");
  return notes;
}
function generateAyurvedicInsight(){
  const state=analyzeDoshaState(vata,pitta,kapha);
  const factors=factorInterpretation(); let msg=`ðŸ§  Ayurvedic Analysis\nDosha State: ${state.type}\nOscillation: ${state.intensity}\n`;
  if(factors.length>0){ msg+="Key Influences:\n"; factors.forEach(n=>msg+="â€¢ "+n+"\n"); } else { msg+="All factors appear stable."; }
  return msg;
}
const reasoningBox=document.createElement("div");
reasoningBox.id="ayurvedaAI"; reasoningBox.style.marginTop="20px";
reasoningBox.style.padding="15px"; reasoningBox.style.borderRadius="10px";
reasoningBox.style.background="rgba(255,255,255,0.05)"; reasoningBox.style.color="#fff";
reasoningBox.style.fontSize="14px"; reasoningBox.style.lineHeight="1.5";
reasoningBox.style.whiteSpace="pre-line"; document.body.appendChild(reasoningBox);
setInterval(()=>{ reasoningBox.innerText=generateAyurvedicInsight(); }, 2000);

// PDF, JSON, PNG Export
document.getElementById("downloadJSON").onclick=function(){
  const data={timestamp:new Date().toISOString(),vata:Math.round(vata),pitta:Math.round(pitta),kapha:Math.round(kapha)};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
  const link=document.createElement("a"); link.href=URL.createObjectURL(blob); link.download="dosha_snapshot.json"; link.click();
};
document.getElementById("downloadPDF").onclick=function(){
  const { jsPDF } = window.jspdf; const doc=new jsPDF(); doc.setFontSize(12); doc.setTextColor(0,0,0);
  doc.text("Dosha Oscillation Report",10,10); doc.text(`Generated: ${new Date().toLocaleString()}`,10,20);
  doc.text(`Vata: ${Math.round(vata)}`,10,30); doc.text(`Pitta: ${Math.round(pitta)}`,10,40); doc.text(`Kapha: ${Math.round(kapha)}`,10,50);
  doc.text("-----------------------------",10,60); doc.save("Dosha_Report.pdf");
};
document.getElementById("downloadPNG").onclick=function(){
  html2canvas(document.body).then(canvas=>{ const link=document.createElement("a"); link.download="dosha_screenshot.png"; link.href=canvas.toDataURL(); link.click(); });
};
</script>

<script>
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('service-worker.js')
    .then(reg => console.log('Service Worker Registered', reg))
    .catch(err => console.log('SW Registration Failed', err));
}
</script>
      
<script>
let audioCtx=null, audioEnabled=false;

function initAudio(){
if(audioCtx) return;
audioCtx=new (window.AudioContext||window.webkitAudioContext)();

const droneOsc=audioCtx.createOscillator();
droneOsc.type="sine";
droneOsc.frequency.value=80;

const droneGain=audioCtx.createGain();
droneGain.gain.value=0;
droneOsc.connect(droneGain).connect(audioCtx.destination);
droneOsc.start();

const vataOsc=audioCtx.createOscillator();
vataOsc.type="sine";
vataOsc.frequency.value=200;

const vataGain=audioCtx.createGain();
vataGain.gain.value=0;
vataOsc.connect(vataGain).connect(audioCtx.destination);
vataOsc.start();

window.doshaAudio={droneOsc,droneGain,vataOsc,vataGain};
}

document.getElementById("soundToggle").onclick=function(){
if(!audioCtx) initAudio();
audioEnabled=!audioEnabled;
this.innerText=audioEnabled?"ðŸ”Š Sound: ON":"ðŸ”ˆ Sound: OFF";

if(audioEnabled){
    // INCREASED VOLUME HERE
    window.doshaAudio.droneGain.gain.setTargetAtTime(0.60,audioCtx.currentTime,0.1);
    window.doshaAudio.vataGain.gain.setTargetAtTime(0.40,audioCtx.currentTime,0.1);
}else{
    window.doshaAudio.droneGain.gain.setTargetAtTime(0,audioCtx.currentTime,0.1);
    window.doshaAudio.vataGain.gain.setTargetAtTime(0,audioCtx.currentTime,0.1);
}
};
</script>
    </div>
    <script>
function unlockApp(){
    const code = document.getElementById("accessCodeInput").value.trim();
    const real = "BNYS";  // Change this

    if(code === real){
        document.getElementById("lockScreen").style.display="none";
        document.getElementById("engineScreen").style.display="block";
    } else {
        alert("Invalid code");
    }
}
  </script>
  
    <!-- Top Navigation Bar -->
<div style="
    width:100%;
    display:flex;
    justify-content:flex-end;
    margin-bottom:15px;
">
    <a href="about.html" style="
        color:#00e0a8;
        text-decoration:none;
        padding:8px 14px;
        border-radius:10px;
        background:rgba(255,255,255,0.08);
        backdrop-filter:blur(10px);
        font-size:14px;
        box-shadow:0 0 10px rgba(0,255,180,0.15);
    ">About</a> <a href="contact.html" style="
    color:#00e0a8;
    text-decoration:none;
    padding:8px 14px;
    border-radius:10px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(10px);
    font-size:14px;
    margin-left:12px;
    box-shadow:0 0 10px rgba(0,255,180,0.15);
">Contact</a> <a href="privacy.html" style="
    color:#00e0a8;
    text-decoration:none;
    padding:8px 14px;
    border-radius:10px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(10px);
    font-size:14px;
    margin-left:12px;
    box-shadow:0 0 10px rgba(0,255,180,0.15);
">Privacy</a> <a href="disclaimer.html" style="
    color:#00e0a8;
    text-decoration:none;
    padding:8px 14px;
    border-radius:10px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(10px);
    font-size:14px;
    margin-left:12px;
    box-shadow:0 0 10px rgba(0,255,180,0.15);
">Disclaimer</a> <a href="terms.html" style="
    color:#00e0a8;
    text-decoration:none;
    padding:8px 14px;
    border-radius:10px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(10px);
    font-size:14px;
    margin-left:12px;
    box-shadow:0 0 10px rgba(0,255,180,0.15);
">Terms</a>
  </div>   
    
</body>
    </html>
